select "games"."id", "games"."name", "games"."description", "games"."rating", "games"."cover_url", "games"."psn_ids", "games"."steam_ids", "games"."created_at", "games"."updated_at", MAX("playlist_games"."rank") as rank, array_agg("playlist_games"."playlist_id") as playlist_ids from "playlist_games" left join "games" on ("playlist_games"."game_id" = "games"."id" and "playlist_games"."playlist_id" = $1) left join "playlists" on "playlists"."id" = "games"."id" group by "games"."id" order by rank
